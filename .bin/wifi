#!/bin/bash

#
# For cygwin, wifi control
#

ssid="lqWIFI"
key="1234567890"

function usage()
{
    echo "wifi:"
    echo "    start:     Start WIFI AP"
    echo "    stop:      Stop WIFI AP"
    echo "    connect:   Connect to WIFI"
    echo "    disonnect: Disconnect from WIFI"
    echo "    show:      Show all WLAN info"
}

if [ $# == 0 ]; then
    usage
    exit 1
fi

/cygdrive/c/Windows/system32/chcp 437 >/dev/null

case $1 in
    "start")
        netsh wlan show driver | findstr Hosted
        echo "    --------------------------"
        netsh wlan set hostednetwork mode=allow ssid=$ssid key=$key
        netsh wlan start hostednetwork
        echo "ssid=$ssid key=$key"
        netsh wlan show hostednetwork
        ;;
    "stop")
        netsh wlan stop hostednetwork
        netsh wlan set hostednetwork mode=disallow
        netsh wlan show hostednetwork
        ;;
    "connect")
        netsh wlan connect name="$2"
        ;;
    "disconnect")
        netsh wlan disconnect
        ;;
    "show")
        netsh wlan show all
        ;;
    *)
        usage
        ;;
esac


#!/bin/bash

# check param
if [ $# -gt 1 ]; then
    echo "open: too many params!"
    exit 1
fi

path=${1:-"."}

os=$(uname -o)
if [ "$os" == "Cygwin" ]; then
    if [ -e "$path" ]; then
        path=$(cygpath --absolute --windows "$path")
    fi
    export HOME="$(cygpath -m --mydocs)/../"
    explorer "$path"
else
    if command -v explorer.exe > /dev/null 2>&1; then
        explorer.exe "$path"
    elif command -v xdg-open > /dev/null 2>&1; then
        xdg-open "$path"
    else
        exit 1
    fi
fi

exit 0

